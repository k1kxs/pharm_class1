# Приложение классификации лекарственных средств

Приложение для управления и отображения классификации лекарственных средств с возможностью редактирования, перетаскивания элементов и экспорта в PDF.

## Архитектура приложения

### Управление состоянием

Приложение использует React Context API для управления глобальным состоянием. Основные компоненты управления состоянием:

- **DrugClassificationContext** - контекст для хранения глобального состояния и методов для его изменения
- **DrugClassificationProvider** - провайдер контекста, содержащий всю логику управления состоянием
- **useDrugClassification** - хук для удобного доступа к контексту из любого компонента

### Основные возможности

- Отображение циклов, групп, подгрупп и категорий лекарственных средств
- Редактирование иерархии классификации
- Добавление, изменение и удаление элементов
- Drag-and-drop для перемещения элементов
- Поиск по всем элементам классификации
- Экспорт выбранных циклов в PDF

### Типы данных

Основные типы данных:
- Cycle - цикл лекарственных средств
- Group - группа лекарственных средств
- Subgroup - подгруппа лекарственных средств
- Category - категория лекарственных средств

## Структура проекта

```
src/
├── components/
│   ├── context/
│   │   ├── DrugClassificationContext.tsx - определение типов и контекста
│   │   ├── DrugClassificationProvider.tsx - провайдер контекста с логикой
│   │   └── index.ts - удобный экспорт контекста и провайдера
│   ├── ui/
│   │   └── Modal.tsx - базовый компонент модального окна
│   ├── utils/
│   │   ├── colorUtils.ts - утилиты для работы с цветами
│   │   └── textUtils.ts - утилиты для работы с текстом
│   ├── types.ts - типы данных
│   ├── CycleComponent.tsx - компонент цикла
│   ├── GroupComponent.tsx - компонент группы
│   ├── SubgroupComponent.tsx - компонент подгруппы
│   ├── CategoryComponent.tsx - компонент категории
│   ├── EditModal.tsx - модальное окно редактирования
│   ├── PasswordModal.tsx - модальное окно входа по паролю
│   ├── ExportModal.tsx - модальное окно экспорта в PDF
│   ├── ColorPickerModal.tsx - модальное окно выбора цвета цикла
│   ├── PDFGenerator.tsx - генератор PDF документов
│   └── ModernDrugClassification.tsx - основной компонент приложения
└── App.js - входная точка приложения
```

## Как это работает

1. **App.js** оборачивает основной компонент в `DrugClassificationProvider`, обеспечивая доступ к глобальному состоянию
2. **DrugClassificationProvider** содержит все состояние и методы для работы с ним
3. **ModernDrugClassification.tsx** и другие компоненты используют хук `useDrugClassification()` для доступа к состоянию
4. Все данные сохраняются в localStorage для персистентности между сессиями

## Преимущества новой архитектуры

1. **Централизованное управление состоянием** - все состояние и логика работы с ним находятся в одном месте
2. **Разделение ответственности** - слой представления отделен от логики управления данными
3. **Улучшенная масштабируемость** - легче добавлять новые компоненты, использующие общее состояние
4. **Упрощение компонентов** - компоненты становятся более легкими, сфокусированными на представлении
5. **Избавление от "prop drilling"** - не нужно передавать пропсы через множество уровней вложенности

## Функциональность

- Просмотр иерархической структуры классификации лекарственных средств
- Редактирование данных с защитой паролем
- Экспорт выбранных циклов в PDF
- Поиск по всей иерархии данных
- Темная и светлая темы интерфейса
- Хранение данных в браузере пользователя

## Технический стек

- React.js
- Tailwind CSS
- jsPDF (для экспорта в PDF)
- Lucide React (иконки)
- LocalStorage (для хранения данных)

## Установка и запуск

### Требования

- Node.js (версия 14 или выше)
- npm (версия 6 или выше)

### Локальная установка

1. Клонировать репозиторий
2. Установить зависимости: `npm install`
3. Запустить приложение в режиме разработки: `npm start`
4. Открыть [http://localhost:3000](http://localhost:3000) в браузере

### Сборка для продакшн

Для создания оптимизированной сборки выполните:

```
npm run build
```

Готовые файлы будут созданы в директории `build`, которую можно разместить на любом статическом хостинге.

## Использование

- Для входа в режим редактирования используйте пароль: `admin123`
- Для экспорта в PDF нажмите кнопку "Экспорт" и выберите нужные циклы
- Для поиска введите текст в поле поиска вверху страницы

## Лицензия

© ФГБОУ ВО ОрГМУ Минздрава России. Все права защищены.